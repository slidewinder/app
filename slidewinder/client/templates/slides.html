<template name="create_slide">
<div class="main-view create-slide">
  <div id="sidebar-left">
    {{>create_slide_sidebar}}
  </div>
  <div id="content-pane">
    <a id="save_slide_btn">
      save slide
    </a>
    {{>slide_editor}}
  </div>
</div>
</template>

<template name="create_slide_sidebar">
<ul class="collapsible" data-collapsible="expandable">
  <li id="sidebar-instructions">
    <div class="collapsible-header active">
      Instructions
    </div>
    <div class="collapsible-body">
      <p>Create your card using markdown in the space on the right.</p>
      <p>Use the <a class="fa fa-eye" href="#"></a> button to toggle a preview of your slide.</p>
      <p>When you are done, press <code>save slide</code> at the top right.</p>
      <p>The <strong>METADATA</strong> tab below can be used to provide information about this slide. You can use this information in the slide with handlebar tags. For example to display the title, use <code>{{|slide.title}}</code>.</p>
      <p>Some metadata fields are always present:
        <ul>
          <li><code>title</code></li>
          <li><code>author</code></li>
          <li><code>background-image</code> (can be empty). If present, the linked image is used as the background of the slide.</li>
          <li><code>tags</code> (can be empty)</li>
        </ul>
      </p>
      <p>In addition to these standard fields, you can add custom fields. This allows you to use arbitrary data in your slide, and in the future will allow mass generation of slides from a template and data.</p>
      <p>The values of fields you create can be used in the slide with the syntax <code>{{|slide.fieldname}}</code>. For example if you create a field called <code>subject</code>, you can use the value by entering <code>{{|slide.subject}}</code>.</p>
    </div>
  </li>
  <!-- TEMPLATES - TODO: implement this -->
   <!-- <li>
     <div class="collapsible-header">
       Templates
     </div>
     <div class="collapsible-body">
       {{#each template in templates}}
         {{>template_card template}}
       {{/each}}
     </div>
   </li> -->
   <li>
     <div class="collapsible-header active">
       Metadata
     </div>
     <div class="collapsible-body" id="slide-editor-metadata">
       <form id="md_card_form">
         <div class="input-field">
           <label for="md_card_title" class="active">Title</label>
           <input type="text" name="title" id="md_card_title" value="New slide">
         </div>
         <div class="input-field">
           <label for="md_card_author" class="active">Author</label>
           <input type="text" name="author" id="md_card_author" value="{{currentUser.profile.name}}">
         </div>
         <div class="input-field">
           <label for="md_card_bg_img">Background image URL</label>
           <input type="text" name="bg_img" id="md_card_bg_img">
         </div>
         <div class="input-field" id="tags-container">
           <label for="md_card_tags">Tags (comma-separated )</label>
           <div><input type="text" name="tags" id="md_card_tags"></div>
         </div>
       </form>
       <div class="new_field row">
         <div class="input-field col s9">
           <input name="field_name" type="text" id="field_name" placeholder="name of new field">
         </div>
         <div class="input-field col s3">
           <a id="md_addfield_btn">add field</a>
         </div>
       </div>
     </div>
   </li>
 </ul>
</template>

<template name="template_card">
<div class="card grey lighten-4 template-card">
  <div class="card-content">
    <span class="card-title">{{name}}</span>
    <div class="card-truncated">{{description}}</div>
  </div>
</div>
</template>

<template name="slide_editor">
<div id="slide-editor-entry">
  <div id="slide-editor-content">
    {{> MDEdit id='slide-editor-mde' defaultContent="# {{slide.title}}\n\nby {{slide.author}}"}}
  </div>
</div>
</template>

<template name="slide_card">
{{#if image}}
  {{>slide_image_card this}}
{{else}}
  {{>slide_text_card this}}
{{/if}}
</template>

<template name="slide_text_card">
<div class="card slide-card">
  <div class="card-content">
    <span class="card-title">{{title}}</span>
    <div class="card-truncated">{{#markdown}}{{truncatedContent}}{{/markdown}}</div>
    <div class="card-menu">
      <a href="#"><i class="mdi mdi-menu"></i></a>
    </div>
  </div>
</div>
</template>

<template name="slide_image_card">
<div class="card slide-card">
  <div class="card-image">
    <img class="slide-card-img" src="{{image}}">
    <span class="card-title">{{title}}</span>
  </div>
  <div class="card-content">
    <div class="card-truncated">{{#markdown}}{{truncatedContent}}{{/markdown}}</div>
    <div class="card-menu valign-wrapper">
      <a href="#" class="valign"><i class="mdi mdi-menu"></i></a>
    </div>
  </div>

</div>
</template>
